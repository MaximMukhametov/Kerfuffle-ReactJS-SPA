(this.webpackJsonpreactnew=this.webpackJsonpreactnew||[]).push([[5],{313:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return j}));var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=0,c=function(){return u++},a={},o="undefined"===typeof window,s=function(){},f=console||{error:s,warn:s,log:s};function l(e,t){return"function"===typeof e?e(t):e}function d(e,t){return h(t)?Object.assign.apply(Object,[{}].concat(Object.keys(t).sort().map((function(e){var n;return(n={})[e]=t[e],n})))):t}function h(e){return e&&"object"===typeof e&&!Array.isArray(e)}function y(){return"undefined"===typeof document||void 0===document.visibilityState||"visible"===document.visibilityState||"prerender"===document.visibilityState}function v(e){if(h(e[0])){if(e[0].hasOwnProperty("queryKey")&&e[0].hasOwnProperty("queryFn")){var t=e[0],n=t.queryKey,r=t.queryFn,i=t.config;return[n,r,void 0===i?{}:i].concat(e.slice(1))}throw new Error("queryKey and queryFn keys are required.")}var u=e[0],c=e[1],a=e[2],o=void 0===a?{}:a,s=e.slice(3);return[u,c,o].concat(s)}function p(e){var t=r.useRef(!1);return r[o?"useEffect":"useLayoutEffect"]((function(){return t.current=!0,function(){return t.current=!1}}),[]),r.useCallback((function(){return t.current?e.apply(void 0,arguments):void 0}),[e])}r.createContext();var g={shared:{suspense:!1,queryKeySerializerFn:function(e){e||b();Array.isArray(e)||(e=[e]);e.some((function(e){return"function"===typeof e}))&&b();var t=(n=e,JSON.stringify(n,d));var n;e=JSON.parse(t),t||b();return[t,e]}},queries:{enabled:!0,retry:3,retryDelay:function(e){return Math.min(1e3*Math.pow(2,e),3e4)},staleTime:0,cacheTime:3e5,refetchOnWindowFocus:!0,refetchInterval:!1,queryFnParamsFilter:function(e){return e},refetchOnMount:!0,isDataEqual:function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,u;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if((r=(u=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,u[i]))return!1;for(i=r;0!==i--;){var c=u[i];if(!e(t[c],n[c]))return!1}return!0}return t!==t&&n!==n},onError:s,onSuccess:s,onSettled:s,useErrorBoundary:!1},mutations:{throwOnError:!1,onMutate:s,onError:s,onSuccess:s,onSettled:s,useErrorBoundary:!1}},m={current:g};function b(){throw new Error("A valid query key is required!")}function S(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function w(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function q(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function F(){}function E(e,t){if(!t)return e&&e.then?e.then(F):Promise.resolve()}function O(e,t){var n=e();return n&&n.then?n.then(t):t(n)}var I=Q(),C=r.createContext(I),T=[I],j=function(){return r.useContext(C)};function Q(e){var t=void 0===e?{}:e,n=t.frozen,r=void 0===n?o:n,u=t.defaultConfig,d=[],h=u?{current:u}:m,p={queries:{},isFetching:0},g=function(){p.isFetching=Object.values(p.queries).reduce((function(e,t){return t.state.isFetching?e+1:e}),0),d.forEach((function(e){return e(p)}))};return p.subscribe=function(e){return d.push(e),function(){d.splice(d.indexOf(e),1)}},p.clear=function(e){var t=(void 0===e?{}:e).notify,n=void 0===t||t;Object.values(p.queries).forEach((function(e){return e.clear()})),p.queries={},n&&g()},p.getQueries=function(e,t){var n=(void 0===t?{}:t).exact;if(!0===e)return Object.values(p.queries);if("function"!==typeof e){var r=h.current.shared.queryKeySerializerFn(e),i=r[0],u=r[1];e=function(e){return n?e.queryHash===i:function e(t,n){return t===n||typeof t===typeof n&&("object"===typeof t&&!Object.keys(n).some((function(r){return!e(t[r],n[r])})))}(e.queryKey,u)}}return Object.values(p.queries).filter(e)},p.getQuery=function(e){return p.getQueries(e,{exact:!0})[0]},p.getQueryData=function(e){var t;return null==(t=p.getQuery(e))?void 0:t.state.data},p.removeQueries=function(){p.getQueries.apply(p,arguments).forEach((function(e){return e.clear()}))},p.cancelQueries=function(){p.getQueries.apply(p,arguments).forEach((function(e){return e.cancel()}))},p.invalidateQueries=q((function(e,t){var n=void 0===t?{}:t,r=n.refetchActive,i=void 0===r||r,u=n.exact,c=n.throwOnError;return w((function(){return S(Promise.all(p.getQueries(e,{exact:u}).map((function(e){return i&&e.instances.length?e.fetch():e.invalidate()}))))}),(function(e){if(c)throw e}))})),p.buildQuery=function(e,t,n){void 0===n&&(n={});var u=(n=i({},h.current.shared,h.current.queries,n)).queryKeySerializerFn(e),d=u[0],v=u[1],m=p.queries[d];return m?Object.assign(m,{queryFn:t,config:n}):(m=function(e){var t=e.queryCache,n=e.queryKey,r=e.queryHash,i=e.queryFn,u=e.config,d="function"===typeof u.initialData?u.initialData():u.initialData,h="undefined"!==typeof d,v=!u.enabled||!h,p=h?"success":u.enabled?"loading":"idle",m={queryKey:n,queryHash:r,queryFn:i,config:u,instances:[],state:k(void 0,{type:"Init",initialStatus:p,initialData:d,hasInitialData:h,isStale:v})};m.dispatch=function(e){m.state=k(m.state,e),m.instances.forEach((function(e){return e.onStateUpdate(m.state)})),g()},m.scheduleStaleTimeout=function(){o||(clearTimeout(m.staleTimeout),m.config.staleTime!==1/0&&(m.staleTimeout=setTimeout((function(){t.getQuery(m.queryKey)&&m.invalidate()}),m.config.staleTime)))},m.invalidate=function(){clearTimeout(m.staleTimeout),m.dispatch({type:"MarkStale"})},m.scheduleGarbageCollection=function(){m.config.cacheTime!==1/0&&(m.dispatch({type:"MarkGC"}),m.cacheTimeout=setTimeout((function(){t.removeQueries((function(e){return e.state.markedForGarbageCollection&&e.queryHash===m.queryHash}))}),"undefined"===typeof m.state.data&&"error"!==m.state.status?0:m.config.cacheTime))},m.heal=function(){clearTimeout(m.cacheTimeout),m.cancelled=null},m.cancel=function(){m.cancelled=a,m.cancelPromises&&m.cancelPromises(),delete m.promise},m.clearIntervals=function(){m.instances.forEach((function(e){e.clearInterval()}))},m.setState=function(e){return m.dispatch({type:"SetState",updater:e})},m.setData=function(e){m.dispatch({type:"Success",updater:e}),m.scheduleStaleTimeout()},m.clear=function(){clearTimeout(m.staleTimeout),clearTimeout(m.cacheTimeout),clearTimeout(m.retryTimeout),m.clearIntervals(),m.cancel(),m.dispatch=s,delete t.queries[m.queryHash]},m.subscribe=function(e){void 0===e&&(e=s);var t={id:c(),onStateUpdate:e};return m.instances.push(t),m.heal(),t.clearInterval=function(){clearInterval(t.refetchIntervalId),delete t.refetchIntervalId},t.updateConfig=function(e){var n=t.config;if(t.config=e,!o){if((null==n?void 0:n.refetchInterval)===e.refetchInterval)return;m.clearIntervals();var r=Math.min.apply(Math,m.instances.map((function(e){return e.config.refetchInterval||1/0})));!t.refetchIntervalId&&r>0&&r<1/0&&(t.refetchIntervalId=setInterval((function(){(y()||m.instances.some((function(e){return e.config.refetchIntervalInBackground})))&&m.fetch()}),r))}},t.run=q((function(){return function(e){if(e&&e.then)return e.then(F)}(w((function(){return O((function(){if(m.config.enabled&&!m.wasSuspended&&m.state.isStale&&(m.config.refetchOnMount||1===m.instances.length))return E(m.fetch())}),(function(){m.wasSuspended=!1}))}),(function(e){f.error(e)})))})),t.unsubscribe=function(){m.instances=m.instances.filter((function(e){return e.id!==t.id})),m.instances.length||(m.clearIntervals(),m.cancel(),o||m.scheduleGarbageCollection())},t};var b=q((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return w((function(){var t=e.apply(void 0,m.config.queryFnParamsFilter(n));return m.cancelPromises=function(){return null==t.cancel?void 0:t.cancel()},S(t,(function(e){if(delete m.shouldContinueRetryOnFocus,delete m.cancelPromises,m.cancelled)throw m.cancelled;return e}))}),(function(t){var r=!1;if(delete m.cancelPromises,m.cancelled)throw m.cancelled;return m.dispatch({type:"Failed"}),O((function(){if(!0===m.config.retry||m.state.failureCount<=m.config.retry||"function"===typeof m.config.retry&&m.config.retry(m.state.failureCount,t)){if(!y())return m.shouldContinueRetryOnFocus=!0,r=!0,new Promise(s);delete m.shouldContinueRetryOnFocus;var i=l(m.config.retryDelay,m.state.failureCount);return r=!0,S(new Promise((function(t,r){m.retryTimeout=setTimeout(q((function(){return m.cancelled?r(m.cancelled):w((function(){return S(b.apply(void 0,[e].concat(n)),(function(e){if(m.cancelled)return r(m.cancelled);t(e)}))}),(function(e){if(m.cancelled)return r(m.cancelled);r(e)}))})),i)})))}}),(function(e){if(r)return e;throw t}))}))}));return m.fetch=q((function(e){var t=(void 0===e?{}:e).__queryFn,n=void 0===t?m.queryFn:t;return m.promise||(m.promise=q((function(){m.cancelled=null;var e=[].concat(m.instances);return m.wasSuspended&&e.unshift(m.fallbackInstance),w((function(){return m.dispatch({type:"Fetch"}),S(b.apply(void 0,[n].concat(m.queryKey)),(function(t){return m.setData((function(e){return m.config.isDataEqual(e,t)?e:t})),e.forEach((function(e){return e.config.onSuccess&&e.config.onSuccess(m.state.data)})),e.forEach((function(e){return e.config.onSettled&&e.config.onSettled(m.state.data,null)})),delete m.promise,t}))}),(function(t){if(m.dispatch({type:"Error",cancelled:t===m.cancelled,error:t}),delete m.promise,t!==m.cancelled)throw e.forEach((function(e){return e.config.onError&&e.config.onError(t)})),e.forEach((function(e){return e.config.onSettled&&e.config.onSettled(void 0,t)})),t}))}))()),m.promise})),m}({queryCache:p,queryKey:v,queryHash:d,queryFn:t,config:n}),!o&&m.state.data&&(m.scheduleStaleTimeout(),m.heal(),m.scheduleGarbageCollection()),r||(p.queries[d]=m,o?g():setTimeout((function(){g()})))),m.fallbackInstance={config:{onSuccess:m.config.onSuccess,onError:m.config.onError,onSettled:m.config.onSettled}},m},p.prefetchQuery=q((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=v(t),i=r[0],u=r[1],c=r[2],a=r[3],o=(a=void 0===a?{}:a).force,s=a.throwOnError;return w((function(){var e=p.buildQuery(i,u,c);return O((function(){if(o||e.state.isStale)return E(e.fetch())}),(function(){return e.state.data}))}),(function(e){if(s)throw e}))})),p.setQueryData=function(e,t,n){void 0===n&&(n={});var r=p.getQuery(e);r||(r=p.buildQuery(e,(function(){return new Promise(s)}),n)),r.setData(t)},p}function k(e,t){var n=function(e,t){switch(t.type){case"Init":return{status:t.initialStatus,error:null,isFetching:!t.hasInitialData||"loading"===t.initialStatus,canFetchMore:!1,failureCount:0,isStale:t.isStale,markedForGarbageCollection:!1,data:t.initialData,updatedAt:t.hasInitialData?Date.now():0};case"Failed":return i({},e,{failureCount:e.failureCount+1});case"MarkStale":return i({},e,{isStale:!0});case"MarkGC":return i({},e,{markedForGarbageCollection:!0});case"Fetch":return i({},e,{status:"undefined"!==typeof e.data?"success":"loading",isFetching:!0,failureCount:0});case"Success":return i({},e,{status:"success",data:l(t.updater,e.data),error:null,isStale:!1,isFetching:!1,canFetchMore:t.canFetchMore,updatedAt:Date.now(),failureCount:0});case"Error":return i({},e,{isFetching:!1,isStale:!0},!t.cancelled&&{status:"error",error:t.error});case"SetState":return l(t.updater,e);default:throw new Error}}(e,t);return Object.assign(n,{isLoading:"loading"===n.status,isSuccess:"success"===n.status,isError:"error"===n.status,isIdle:"idle"===n.status}),n}var D,P,M=function(){y()&&(void 0===navigator.onLine||navigator.onLine)&&T.forEach((function(e){return e.invalidateQueries((function(e){return!!e.instances.length&&(!!e.config.enabled&&(e.shouldContinueRetryOnFocus?(delete e.promise,!0):e.config.refetchOnWindowFocus))})).catch(f.error)}))};function A(){var e=j(),t=r.useReducer((function(e){return e+1}),1),n=t[0],i=p(t[1]);return r.useEffect((function(){return e.subscribe(i)}),[e,i]),r.useMemo((function(){return n&&e.isFetching}),[e.isFetching,n])}P=function(e){var t;if(!o&&(null==(t=window)?void 0:t.addEventListener))return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),function(){window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}},D&&D(),D=P(M)}}]);
//# sourceMappingURL=5.3f5c98db.chunk.js.map